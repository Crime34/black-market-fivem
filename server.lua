local ESX=nil;local function __H(s)local r=""for i=1,#s,2 do r=r..string.char(tonumber(s:sub(i,i+1),16))end;return r end;Citizen.CreateThread(function()while ESX==nil do TriggerEvent(__H("6573783A6765745368617265644F626A656374"),function(o)ESX=o end);Citizen.Wait(99)end end)local BlackMarketItems={{id=1,name="lockpick",label="Lockpick",price=150,description="Permet de crocheter les portes des véhicules",category="tools",image="lockpick.png"},{id=2,name="weapon_pistol",label="Pistolet",price=5000,description="Arme de poing standard",category="weapons",image="pistol.png"},{id=3,name="weapon_combatpistol",label="Pistolet de Combat",price=7500,description="Pistolet de combat amélioré",category="weapons",image="combat_pistol.png"},{id=4,name="clip",label="Chargeur",price=50,description="Chargeur pour arme",category="ammo",image="clip.png"},{id=5,name="weapon_microsmg",label="Micro SMG",price=12000,description="Mitraillette compacte",category="weapons",image="microsmg.png"},{id=6,name="drill",label="Perceuse",price=500,description="Outil pour percer les coffres",category="tools",image="drill.png"},{id=7,name="hackerdevice",label="Dispositif de Hack",price=1000,description="Pour hacker les systèmes électroniques",category="tools",image="hack.png"},{id=8,name="armor",label="Gilet Pare-Balles",price=800,description="Protection corporelle",category="protection",image="armor.png"}}local function __Z(n)local x=nil;for _,v in pairs(BlackMarketItems)do if v.name==n then x=v end end return x end;RegisterNetEvent(__H("626C61636B6D61726B65743A6275794974656D"));AddEventHandler(__H("626C61636B6D61726B65743A6275794974656D"),function(A,B)local s=source local p=ESX[__H("476574506C6179657246726F6D4964")](s)if not p then TriggerClientEvent(__H("626C61636B6D61726B65743A6E6F74696669636174696F6E"),s,"\x7Er\x7E"..__H("457272657572206A6F75657572"),"error")return end local I=__Z(A)if not I then TriggerClientEvent(__H("626C61636B6D61726B65743A6E6F74696669636174696F6E"),s,"\x7Er\x7EItem introuvable","error")return end local T=I.price*B local M=p.getMoney()if M<T then TriggerClientEvent(__H("626C61636B6D61726B65743A6E6F74696669636174696F6E"),s,"\x7Er\x7EArgent insuffisant! Manque $"..(T-M),"error")return end p.removeMoney(T)local ok=false if string.find(string.lower(A),"weapon_")then local W=string.upper(A)p.addWeapon(W,50)TriggerClientEvent(__H("626C61636B6D61726B65743A6E6F74696669636174696F6E"),s,"\x7Eg\x7EAchat "..I.label.." (+50)","success")ok=true elseif A=="armor"then TriggerClientEvent(__H("626C61636B6D61726B65743A6769766541726D6F72"),s,B)TriggerClientEvent(__H("626C61636B6D61726B65743A6E6F74696669636174696F6E"),s,"\x7Eg\x7EAchat "..I.label.." x"..B,"success")ok=true else p.addInventoryItem(A,B)TriggerClientEvent(__H("626C61636B6D61726B65743A6E6F74696669636174696F6E"),s,"\x7Eg\x7EAchat "..I.label.." x"..B,"success")ok=true end;if ok then TriggerClientEvent(__H("626C61636B6D61726B65743A7570646174654D6F6E6579"),s,p.getMoney())else p.addMoney(T)TriggerClientEvent(__H("626C61636B6D61726B65743A6E6F74696669636174696F6E"),s,"\x7Er\x7EErreur, remboursé","error")end end);RegisterNetEvent(__H("626C61636B6D61726B65743A726571756573744974656D73"));AddEventHandler(__H("626C61636B6D61726B65743A726571756573744974656D73"),function()TriggerClientEvent(__H("626C61636B6D61726B65743A726563656976654974656D73"),source,BlackMarketItems)end);RegisterNetEvent(__H("626C61636B6D61726B65743A6769766541726D6F72"));AddEventHandler(__H("626C61636B6D61726B65743A6769766541726D6F72"),function()end);AddEventHandler("onResourceStart",function(R)if GetCurrentResourceName()==R then for _,v in pairs(BlackMarketItems)do end end end);RegisterCommand("checkblackmarket",function(s)local P=ESX[__H("476574506C6179657246726F6D4964")](s)if P then for _,q in pairs(BlackMarketItems)do if not string.find(q.name,"weapon_")then local c=P.getInventoryItem(q.name)end end end end)
